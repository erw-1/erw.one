"use strict";window.KM=window.KM||{};const KM=window.KM;let __VPW=window.innerWidth,__VPH=window.innerHeight;addEventListener("resize",()=>{__VPW=window.innerWidth,__VPH=window.innerHeight},{passive:!0});const DOC=document,$=(e,t=DOC)=>t.querySelector(e),$$=(e,t=DOC)=>[...t.querySelectorAll(e)],el=(e,t={},n=[])=>{let r=DOC.createElement(e);for(let l in t){let a=t[l];"class"===l||"className"===l?r.className=a:"dataset"===l?Object.assign(r.dataset,a):l in r?r[l]=a:r.setAttribute(l,a)}if(null!=n){let i=Array.isArray(n)?n:[n];i.length&&r.append(...i)}return r};Object.assign(KM,{$,$$,DEBUG:!1});const CFG_EL=DOC.getElementById("km-config"),CFG=CFG_EL&&JSON.parse(CFG_EL.textContent||"{}")||{},{TITLE:e="Wiki",MD:t="",LANGS:n=[],DEFAULT_THEME:r,ACCENT:l,CACHE_MD:a}=CFG,CACHE_MIN=Number(a)||0,CACHE_KEY=e=>`km:md:v1:${e}`;function readCache(e){try{let t=localStorage.getItem(CACHE_KEY(e));if(!t)return null;let n=JSON.parse(t);if(!n||"number"!=typeof n.ts||"string"!=typeof n.txt)return null;return n}catch(r){return null}}function writeCache(e,t){try{localStorage.setItem(CACHE_KEY(e),JSON.stringify({ts:Date.now(),txt:t}))}catch(n){}}const escapeRegex=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),whenIdle=(e,t=1500)=>"requestIdleCallback"in window?requestIdleCallback(e,{timeout:t}):setTimeout(e,0),domReady=()=>"loading"!==DOC.readyState?Promise.resolve():new Promise(e=>DOC.addEventListener("DOMContentLoaded",e,{once:!0})),clearSelection=()=>{let e=window.getSelection?.();e&&!e.isCollapsed&&e.removeAllRanges()},baseURLNoHash=()=>location.href.replace(/#.*$/,"");let pages=[],byId=new Map,root=null;const descMemo=new Map;function parseMarkdownBundle(e){pages=[],byId=new Map,root=null,descMemo.clear();let t=e.matchAll(/<!--([\s\S]*?)-->\s*([\s\S]*?)(?=<!--|$)/g);for(let[,n,r]of t){let l={};n.replace(/(\w+):"([^"]+)"/g,(e,t,n)=>l[t]=n.trim());let a={...l,content:(r||"").trim(),children:[]};pages.push(a),byId.set(a.id,a)}if(!pages.length)throw Error("No pages parsed from MD bundle.");root=byId.get("home")||pages[0],pages.forEach(e=>{if(e!==root){let t=byId.get((e.parent||"").trim());e.parent=t||null,t&&t.children.push(e)}else e.parent=null;e.tagsSet=new Set((e.tags||"").split(",").map(e=>e.trim()).filter(Boolean)),e.searchStr=(e.title+" "+[...e.tagsSet].join(" ")+" "+e.content).toLowerCase()}),pages.forEach(e=>{let t=[0,0,0,0,0,0],n=[],r=!1,l=0,a=null;for(let i of e.content.split(/\r?\n/)){if(/^(?:```|~~~)/.test(i)&&(r=!r),!r&&/^(#{1,6})\s+/.test(i)){a&&(a.body=e.content.slice(a.bodyStart,l).trim(),a.search=(a.txt+" "+a.body).toLowerCase(),n.push(a));let[,s,o]=i.match(/^(#{1,6})\s+(.+)/),c=s.length-1;t[c]++;for(let d=c+1;d<6;d++)t[d]=0;a={id:t.slice(0,c+1).filter(Boolean).join("_"),txt:o.trim(),bodyStart:l+i.length+1}}l+=i.length+1}a&&(a.body=e.content.slice(a.bodyStart).trim(),a.search=(a.txt+" "+a.body).toLowerCase(),n.push(a)),e.sections=n})}function descendants(e){if(descMemo.has(e))return descMemo.get(e);let t=0;return!function e(n){n.children.forEach(n=>{t++,e(n)})}(e),descMemo.set(e,t),t}function attachSecondaryHomes(){let e=e=>{for(;e.parent;)e=e.parent;return e},t=new Map;for(let n of pages){let r=e(n);r!==root&&(t.has(r)||t.set(r,[]),t.get(r).push(n))}let l=0;for(let[a,i]of t){let s=i.reduce((e,t)=>descendants(t)>descendants(e)?t:e,i[0]);s.parent||(s.parent=root,s.isSecondary=!0,s.clusterId=l++,root.children.push(s))}}function computeHashes(){pages.forEach(e=>{let t=[];for(let n=e;n&&n.parent;n=n.parent)t.unshift(n.id);e.hash=t.join("#")})}const hashOf=e=>e?.hash??"",find=e=>{let t=root;for(let n of e){let r=t.children.find(e=>e.id===n);if(!r)break;t=r}return t};function nav(e){e&&(location.hash="#"+hashOf(e))}KM.nav=nav;const ensureOnce=e=>{let t;return()=>t||=e()};KM.ensureD3=ensureOnce(async()=>{let[e,t,n]=await Promise.all([import("https://cdn.jsdelivr.net/npm/d3-selection@3.0.0/+esm"),import("https://cdn.jsdelivr.net/npm/d3-force@3.0.0/+esm"),import("https://cdn.jsdelivr.net/npm/d3-drag@3.0.0/+esm")]);KM.d3={select:e.select,selectAll:e.selectAll,forceSimulation:t.forceSimulation,forceLink:t.forceLink,forceManyBody:t.forceManyBody,forceCenter:t.forceCenter,drag:n.drag}}),KM.ensureHighlight=ensureOnce(async()=>{let{default:e}=await import("https://cdn.jsdelivr.net/npm/highlight.js@11.11.1/es/core/+esm");Array.isArray(n)&&n.length&&await Promise.allSettled(n.map(async t=>{try{let n=await import(`https://cdn.jsdelivr.net/npm/highlight.js@11.11.1/es/languages/${t}/+esm`);e.registerLanguage(t,n.default)}catch(r){}})),window.hljs=e}),KM.ensureHLJSTheme=()=>new Promise(e=>{let t={light:"https://cdn.jsdelivr.net/npm/highlight.js@11.11.1/styles/github.min.css",dark:"https://cdn.jsdelivr.net/npm/highlight.js@11.11.1/styles/github-dark.min.css"},n="dark"===DOC.documentElement.getAttribute("data-theme")?"dark":"light",r=DOC.querySelector("link[data-hljs-theme]");if(r||((r=DOC.createElement("link")).rel="stylesheet",r.setAttribute("data-hljs-theme",""),DOC.head.appendChild(r)),r.getAttribute("href")===t[n])return e();r.onload=r.onerror=e,r.href=t[n]});let mdReady=null;KM.ensureMarkdown=()=>mdReady||(mdReady=Promise.all([import("https://cdn.jsdelivr.net/npm/marked@16.1.2/+esm"),import("https://cdn.jsdelivr.net/npm/marked-alert@2.1.2/+esm"),import("https://cdn.jsdelivr.net/npm/marked-footnote@1.4.0/+esm"),]).then(([e,t,n])=>{let r=new e.Marked().use(t.default()).use(n.default());return{parse:(e,t)=>r.parse(e,{...t,mangle:!1})}})),KM.ensureKatex=ensureOnce(async()=>{let e="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/";if(!DOC.getElementById("katex-css")){let t=Object.assign(DOC.createElement("link"),{id:"katex-css",rel:"stylesheet",href:e+"katex.min.css"});DOC.head.appendChild(t)}let[n,r]=await Promise.all([import(e+"katex.min.js/+esm"),import(e+"contrib/auto-render.min.js/+esm")]);window.katex=n,window.renderMathInElement=r.default});const sortByTitle=(e,t)=>e.title.localeCompare(t.title);async function copyText(e,t){try{await navigator.clipboard.writeText(e),t&&(t.classList.add("flash"),setTimeout(()=>t.classList.remove("flash"),300))}catch(n){KM.DEBUG&&console.warn("Clipboard API unavailable",n)}}function numberHeadings(e){let t=[0,0,0,0,0,0,0];$$("h1,h2,h3,h4,h5,h6",e).forEach(e=>{let n=+e.tagName[1]-1;t[n]++;for(let r=n+1;r<7;r++)t[r]=0;e.id=t.slice(0,n+1).filter(Boolean).join("_")})}let tocObserver=null;function buildToc(e){let t=$("#toc");if(!t)return;t.innerHTML="";let n=$$("#content h1,#content h2,#content h3");if(!n.length){tocObserver?.disconnect(),tocObserver=null;return}let r=hashOf(e),l=el("ul"),a=DOC.createDocumentFragment();for(let i of n)a.append(el("li",{dataset:{level:i.tagName[1],hid:i.id}},[el("a",{href:"#"+(r?r+"#":"")+i.id,textContent:i.textContent})]));l.append(a),t.append(l),tocObserver?.disconnect(),tocObserver=new IntersectionObserver(e=>{for(let t of e){let n=$(`#toc li[data-hid="${t.target.id}"] > a`);n&&t.isIntersecting&&($("#toc .toc-current")?.classList.remove("toc-current"),n.classList.add("toc-current"))}},{rootMargin:"0px 0px -70% 0px",threshold:0}),n.forEach(e=>tocObserver.observe(e))}function prevNext(e){if($("#prev-next")?.remove(),!e.parent||e.parent===root&&e.isSecondary)return;let t=e.parent.children;if(e.parent!==root||e.isSecondary||(t=t.filter(e=>!e.isSecondary)),t.length<2)return;let n=t.indexOf(e),r=el("div",{id:"prev-next"});n>0&&r.append(el("a",{href:"#"+hashOf(t[n-1]),textContent:"← "+t[n-1].title})),n<t.length-1&&r.append(el("a",{href:"#"+hashOf(t[n+1]),textContent:t[n+1].title+" →"})),$("#content").append(r)}function seeAlso(e){if($("#see-also")?.remove(),!e.tagsSet?.size)return;let t=pages.filter(t=>t!==e).map(t=>({p:t,shared:[...t.tagsSet].filter(t=>e.tagsSet.has(t)).length})).filter(e=>e.shared>0).sort((e,t)=>t.shared-e.shared||sortByTitle(e.p,t.p));if(!t.length)return;let n=el("div",{id:"see-also"},[el("h2",{textContent:"See also"}),el("ul")]),r=n.querySelector("ul");t.forEach(({p:e})=>r.append(el("li",{},[el("a",{href:"#"+hashOf(e),textContent:e.title})])));let l=$("#content"),a=$("#prev-next");l.insertBefore(n,a??null)}function fixFootnoteLinks(e,t=$("#content")){let n=hashOf(e);n&&$$('a[href^="#"]',t).forEach(e=>{let t=e.getAttribute("href");/^#(?:fn|footnote)/.test(t)&&!t.includes(n+"#")&&e.setAttribute("href",`#${n}${t}`)})}const ICONS={link:"M3.9 12c0-1.7 1.4-3.1 3.1-3.1h5.4v-2H7c-2.8 0-5 2.2-5 5s2.2 5 5 5h5.4v-2H7c-1.7 0-3.1-1.4-3.1-3.1zm5.4 1h6.4v-2H9.3v2zm9.7-8h-5.4v2H19c1.7 0 3.1 1.4 3.1 3.1s-1.4 3.1-3.1 3.1h-5.4v2H19c2.8 0 5-2.2 5-5s-2.2-5-5-5z",code:"M19,21H5c-1.1,0-2-0.9-2-2V7h2v12h14V21z M21,3H9C7.9,3,7,3.9,7,5v12 c0,1.1,0.9,2,2,2h12c2.2,0,2-2,2-2V5C23,3.9,22.1,3,21,3z M21,17H9V5h12V17z"},iconBtn=(e,t,n,r)=>el("button",{type:"button",class:n,title:e,"aria-label":e,onclick:r,innerHTML:`<svg width="14" height="14" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="${t}"></path></svg>`});function decorateHeadings(e,t=$("#content")){let n=hashOf(e),r=baseURLNoHash()+"#"+(n?n+"#":"");$$("h1,h2,h3,h4,h5,h6",t).forEach(e=>{let t=`${r}${e.id}`,n=e.querySelector("button.heading-copy")||e.appendChild(iconBtn("Copy direct link",ICONS.link,"heading-copy",n=>{n.stopPropagation(),copyText(t,e.querySelector("button.heading-copy"))}));e.onclick=()=>{window.getSelection&&String(window.getSelection()).length||(clearSelection(),copyText(t,n))}})}function decorateCodeBlocks(e=$("#content")){$$("pre",e).forEach(e=>{e.querySelector("button.code-copy")||e.append(iconBtn("Copy code",ICONS.code,"code-copy",()=>{let t=e.querySelector("code");copyText(t?t.innerText:e.innerText,e.querySelector("button.code-copy"))}))})}function decorateExternalLinks(){$$("#content a[href]").forEach(e=>{let t=e.getAttribute("href");if(!t||!t||t.startsWith("#"))return;let n;try{n=new URL(t,baseURLNoHash())}catch{return}let r="http:"===n.protocol||"https:"===n.protocol,l=r&&n.origin!==location.origin;if(l){e.setAttribute("target","_blank");let a=new Set((e.getAttribute("rel")||"").split(/\s+/).filter(Boolean));a.add("noopener"),a.add("noreferrer"),a.add("external"),e.setAttribute("rel",Array.from(a).join(" "))}})}function buildTree(){let e=$("#tree");if(!e)return;e.setAttribute("role","tree"),e.innerHTML="";let t=root.children.filter(e=>!e.isSecondary),n=root.children.filter(e=>e.isSecondary).sort((e,t)=>e.clusterId-t.clusterId),r=(e,t,n=0)=>{e.forEach(e=>{let l=el("li");if(e.children.length){let a=n<2;l.className="folder"+(a?" open":"");let i=`group-${e.id}`,s=el("button",{type:"button",class:"caret","aria-expanded":String(a),"aria-controls":i,"aria-label":a?"Collapse":"Expand"}),o=el("a",{class:"lbl",dataset:{page:e.id},href:"#"+hashOf(e),textContent:e.title}),c=el("ul",{id:i,role:"group",style:`display:${a?"block":"none"}`});l.setAttribute("role","treeitem"),l.setAttribute("aria-expanded",String(a)),l.append(s,o,c),t.append(l),r(e.children,c,n+1)}else l.className="article",l.setAttribute("role","treeitem"),l.append(el("a",{dataset:{page:e.id},href:"#"+hashOf(e),textContent:e.title})),t.append(l)})},l=DOC.createDocumentFragment();r(t,l),n.forEach(e=>{let t=el("div",{class:"group-sep",role:"presentation","aria-hidden":"true"},[el("hr",{role:"presentation","aria-hidden":"true"})]);l.append(t),r([e],l)}),e.append(l)}function highlightSidebar(e){$("#tree .sidebar-current")?.classList.remove("sidebar-current");let t=$(`#tree a[data-page="${e.id}"]`);if(!t)return;t.classList.add("sidebar-current");let n=t.closest("li");for(;n;){if(n.classList.contains("folder")){n.classList.add("open"),n.setAttribute("aria-expanded","true");let r=n.querySelector("button.caret");r&&(r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label","Collapse"));let l=n.querySelector('ul[role="group"]');l&&(l.style.display="block")}n=n.parentElement?.closest("li")}let a=$("#tree");if(a&&t){let i=t.getBoundingClientRect(),s=a.getBoundingClientRect();(i.top<s.top||i.bottom>s.bottom)&&t.scrollIntoView({block:"nearest"})}}function search(e){let t=$("#results"),n=$("#tree");if(!t||!n)return;let r=e.trim().toLowerCase();if(t.setAttribute("aria-live","polite"),t.setAttribute("aria-busy","true"),!r){t.style.display="none",t.innerHTML="",n.style.display="";return}let l=r.split(/\s+/).filter(e=>e.length>=2),a=l.map(e=>RegExp("\b"+escapeRegex(e)+"\b"));t.innerHTML="",t.style.display="",n.style.display="none";let i={title:5,tag:3,body:1,secTitle:3,secBody:1,phraseTitle:5,phraseBody:2,secCountCap:4},s=l.length>1?r:null,o=[];for(let c of pages){if(!l.every(e=>c.searchStr.includes(e)))continue;let d=c.title.toLowerCase(),h=[...c.tagsSet].join(" ").toLowerCase(),u=c.content.toLowerCase(),p=0;for(let f=0;f<a.length;f++){let g=a[f];g.test(d)&&(p+=i.title),g.test(h)&&(p+=i.tag),g.test(u)&&(p+=i.body)}s&&(d.includes(s)?p+=i.phraseTitle:u.includes(s)&&(p+=i.phraseBody));let m=[];for(let b of c.sections){if(!l.every(e=>b.search.includes(e)))continue;let y=b.txt.toLowerCase(),C=b.body.toLowerCase(),k=0;for(let _ of l){let v=RegExp("\b"+escapeRegex(_)+"\b","g");v.test(y)&&(k+=i.secTitle),v.test(C)&&(k+=i.secBody)}s&&(y.includes(s)||C.includes(s))&&(k+=1),m.push({sec:b,s:k})}m.sort((e,t)=>t.s-e.s),p+=Math.min(i.secCountCap,m.length),o.push({p:c,score:p,matchedSecs:m})}o.sort((e,t)=>t.score-e.score||e.p.title.localeCompare(t.p.title));let w=DOC.createDocumentFragment();for(let{p:x,matchedSecs:M}of o){let L=el("li",{class:"page-result"},[el("a",{href:"#"+hashOf(x),textContent:x.title})]);if(M.length){let E=hashOf(x),S=el("ul",{class:"sub-results"});M.forEach(({sec:e})=>{S.append(el("li",{class:"heading-result"},[el("a",{href:`#${E?E+"#":""}${e.id}`,textContent:e.txt})]))}),L.append(S)}w.append(L)}t.append(w),t.children.length||(t.innerHTML='<li id="no_result">No result</li>'),t.setAttribute("aria-busy","false")}function breadcrumb(e){let t=$("#crumb-dyn");if(!t)return;t.innerHTML="";let n=[];for(let r=e;r;r=r.parent)n.unshift(r);if(n.length&&n.shift(),n.forEach(n=>{t.insertAdjacentHTML("beforeend",'<span class="separator">▸</span>');let r=el("span",{class:"dropdown"}),l=el("a",{textContent:n.title,href:"#"+hashOf(n)});n===e&&(l.className="crumb-current"),r.append(l);let a=n.parent.children.filter(e=>e!==n);if(a.length){let i=el("ul");a.forEach(e=>i.append(el("li",{textContent:e.title,onclick:()=>nav(e)}))),r.append(i)}t.append(r)}),e.children.length){let l=el("span",{class:"childbox"},[el("span",{class:"toggle",textContent:"▾"}),el("ul")]),a=l.querySelector("ul");e.children.sort(sortByTitle).forEach(e=>a.append(el("li",{textContent:e.title,onclick:()=>nav(e)}))),t.append(l)}}const IDS={current:"node_current",parent:"node_parent",leaf:"node_leaf",hierPRE:"link_hier",tagPRE:"link_tag",label:"graph_text"},graphs={};let CURRENT=-1;function getMiniSize(){let e=$("#mini");if(!e)return{w:400,h:300};if(e.classList.contains("fullscreen"))return{w:innerWidth,h:innerHeight};let t=e.getBoundingClientRect();return{w:Math.max(1,0|t.width),h:Math.max(1,0|t.height)}}function updateMiniViewport(){if(!graphs.mini)return;let{svg:e,sim:t}=graphs.mini,{w:n,h:r}=getMiniSize();graphs.mini.w=n,graphs.mini.h=r,e.attr("viewBox",`0 0 ${n} ${r}`).attr("width",n).attr("height",r).attr("preserveAspectRatio","xMidYMid meet"),t.force("center",KM.d3.forceCenter(n/2,r/2)),t.alpha(.2).restart()}function buildGraphData(){let e=[],t=[],n=new Map,r=new Set,l=(e,t)=>{(n.get(e)||n.set(e,new Set).get(e)).add(t),(n.get(t)||n.set(t,new Set).get(t)).add(e)},a=e=>e<3?1:e<6?2:e<11?3:e<21?4:5;pages.forEach((t,n)=>{t._i=n,e.push({id:n,label:t.title,ref:t})}),pages.forEach(e=>{if(!e.parent||e.isSecondary&&e.parent===root)return;let n=e._i,i=e.parent._i,s=n<i?`${n}|${i}`:`${i}|${n}`;t.push({source:n,target:i,shared:0,kind:"hier",tier:a(descendants(e))}),r.add(s),l(n,i)});let i=new Map;pages.forEach(e=>{for(let t of e.tagsSet)i.has(t)||i.set(t,[]),i.get(t).push(e._i)});let s=new Map;for(let o of i.values())for(let c=0;c<o.length;c++)for(let d=c+1;d<o.length;d++){let h=o[c],u=o[d],p=h<u?`${h}|${u}`:`${u}|${h}`;s.set(p,(s.get(p)||0)+1)}for(let[f,g]of s){if(r.has(f))continue;let[m,b]=f.split("|").map(Number);t.push({source:m,target:b,shared:g,kind:"tag"}),l(m,b)}return{nodes:e,links:t,adj:n}}async function buildGraph(){var e;if(await KM.ensureD3(),graphs.mini)return;let{nodes:t,links:n,adj:r}=buildGraphData(),l=KM.d3.select("#mini"),{w:a,h:i}=getMiniSize();l.attr("viewBox",`0 0 ${a} ${i}`).attr("width",a).attr("height",i).attr("preserveAspectRatio","xMidYMid meet");let s=t.map(e=>({...e})),o=n.map(e=>({...e})),c=KM.d3.forceSimulation(s).force("link",KM.d3.forceLink(o).id(e=>e.id).distance(80)).force("charge",KM.d3.forceManyBody().strength(-240)).force("center",KM.d3.forceCenter(a/2,i/2)),d=l.append("g").attr("class","view"),h=d.append("g").selectAll("line").data(o).join("line").attr("id",e=>"hier"===e.kind?IDS.hierPRE+e.tier:IDS.tagPRE+Math.min(e.shared,5)),u=d.append("g").selectAll("circle").data(s).join("circle").attr("r",6).attr("id",e=>e.ref.children.length?IDS.parent:IDS.leaf).on("click",(e,t)=>KM.nav(t.ref)).on("mouseover",(e,t)=>f(t.id,.15)).on("mouseout",()=>f(null,1)).call(KM.d3.drag().on("start",(e,t)=>{t.fx=t.x,t.fy=t.y}).on("drag",(e,t)=>{c.alphaTarget(.25).restart(),t.fx=e.x,t.fy=e.y}).on("end",(e,t)=>{e.active||c.alphaTarget(0),t.fx=t.fy=null})),p=d.append("g").selectAll("text").data(s).join("text").attr("id",IDS.label).attr("font-size",10).attr("pointer-events","none").text(e=>e.label);function f(e,t){u.style("opacity",n=>null==e||graphs.mini.adj.get(e)?.has(n.id)||n.id===e?1:t),p.style("opacity",n=>null==e||graphs.mini.adj.get(e)?.has(n.id)||n.id===e?1:t),h.style("opacity",n=>null==e||n.source.id===e||n.target.id===e?1:t)}c.on("tick",()=>{h.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),u.attr("cx",e=>e.x).attr("cy",e=>e.y),p.attr("x",e=>e.x+8).attr("y",e=>e.y+3)}),graphs.mini={svg:l,node:u,label:p,sim:c,view:d,adj:r,w:a,h:i},observeMiniResize()}function highlightCurrent(e=!1){if(!graphs.mini)return;let t=location.hash.slice(1).split("#").filter(Boolean),n=find(t),r=n?._i??-1;if(r===CURRENT&&!e)return;let l=graphs.mini;l.node.attr("id",e=>e.id===r?IDS.current:e.ref.children.length?IDS.parent:IDS.leaf).attr("r",e=>e.id===r?8:6),l.label.classed("current",e=>e.id===r);let a=l.w/2,i=l.h/2;l.node.filter(e=>e.id===r).each(e=>{let t=a-e.x,n=i-e.y;l.view.attr("transform",`translate(${t},${n})`),e.vx+=(a-e.x)*.1,e.vy+=(i-e.y)*.1}),l.sim.alphaTarget(.15).restart(),setTimeout(()=>l.sim.alphaTarget(0),250),CURRENT=r}function observeMiniResize(){let e=$("#mini");e&&new ResizeObserver(()=>{graphs.mini&&(updateMiniViewport(),highlightCurrent(!0))}).observe(e)}function scrollToAnchor(e){if(!e)return;let t=DOC.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})}async function render(e,t){let n=$("#content");if(!n)return;let{parse:r}=await KM.ensureMarkdown();n.innerHTML=r(e.content,{headerIds:!1}),decorateExternalLinks();let l=$$("#content img");l.forEach((e,t)=>{e.loading="lazy",e.decoding="async",!e.hasAttribute("fetchpriority")&&t<2&&e.setAttribute("fetchpriority","high")}),fixFootnoteLinks(e),numberHeadings(n),DOC.querySelector("#content pre code")&&(await KM.ensureHLJSTheme(),await KM.ensureHighlight(),window.hljs.highlightAll()),/(\$[^$]+\$|\\\(|\\\[)/.test(e.content)&&(await KM.ensureKatex(),window.renderMathInElement(n,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}],throwOnError:!1})),buildToc(e),decorateHeadings(e),decorateCodeBlocks(),prevNext(e),seeAlso(e),scrollToAnchor(t)}let currentPage=null;function route(){closePanels();let e=location.hash.slice(1).split("#").filter(Boolean),t=find(e),n=hashOf(t),r=n?n.split("#"):[],l=e.slice(r.length).join("#");if(currentPage!==t)currentPage=t,window.scrollTo({top:0}),breadcrumb(t),render(t,l),highlightCurrent(!0),highlightSidebar(t);else if(l){scrollToAnchor(l);let a=$(`#toc li[data-hid="${l}"] > a`);a&&($("#toc .toc-current")?.classList.remove("toc-current"),a.classList.add("toc-current"))}}function closePanels(){$("#sidebar")?.classList.remove("open"),$("#util")?.classList.remove("open")}let uiInited=!1;function initUI(){try{KM.attachLinkPreviewsV2()}catch(t){}if(uiInited)return;uiInited=!0,$("#wiki-title-text").textContent=e,document.title=e,buildTree(),function e(){let t=$("#theme-toggle"),n=DOC.documentElement,a=matchMedia("(prefers-color-scheme: dark)"),i=localStorage.getItem("km-theme"),s="dark"===r||"light"===r?r:null,o=i?"dark"===i:s?"dark"===s:a.matches;"string"==typeof l&&l&&n.style.setProperty("--color-accent",l);let c=DOC.querySelector('meta[name="theme-color"]');function d(e){n.style.setProperty("--color-main",e?"rgb(29,29,29)":"white"),n.setAttribute("data-theme",e?"dark":"light"),c&&c.setAttribute("content",e?"#1d1d1d":"#ffffff"),KM.ensureHLJSTheme()}d(o),t&&(t.setAttribute("aria-pressed",String(o)),t.onclick=()=>{d(o=!o),t.setAttribute("aria-pressed",String(o)),localStorage.setItem("km-theme",o?"dark":"light")}),a.addEventListener?.("change",e=>{let t=!!localStorage.getItem("km-theme");t||s||d(o=e.matches)}),addEventListener("storage",e=>{"km-theme"===e.key&&d(o="dark"===e.newValue)})}(),route();let n=$("#mini");n&&new IntersectionObserver((e,t)=>{e[0]?.isIntersecting&&(buildGraph(),t.disconnect())}).observe(n);let a=$("#mini"),i=$("#expand");i&&a&&(i.onclick=()=>{let e=a.classList.toggle("fullscreen");i.setAttribute("aria-pressed",String(e)),updateMiniViewport(),requestAnimationFrame(()=>highlightCurrent(!0))});let s=$("#search"),o=$("#search-clear"),c=0;s&&o&&(s.oninput=e=>{clearTimeout(c);let t=e.target.value;o.style.display=t?"":"none",c=setTimeout(()=>search(t),150)},o.onclick=()=>{s.value="",o.style.display="none",search(""),s.focus()});let d=e=>{let t=$(e);if(!t)return;let n=t.classList.contains("open");closePanels(),n||(t.classList.add("open"),t.querySelector(".panel-close")||t.append(el("button",{type:"button",class:"panel-close","aria-label":"Close panel",textContent:"✕",onclick:closePanels})))},h=$("#burger-sidebar"),u=$("#burger-util");h&&(h.onclick=()=>d("#sidebar")),u&&(u.onclick=()=>d("#util")),addEventListener("resize",()=>{matchMedia("(min-width:1001px)").matches&&(closePanels(),highlightCurrent(!0)),$("#mini")?.classList.contains("fullscreen")&&(updateMiniViewport(),highlightCurrent(!0))},{passive:!0}),$("#tree").addEventListener("click",e=>{let t=e.target.closest("button.caret");if(t){let n=t.closest("li.folder"),r=n.querySelector("ul"),l=!n.classList.contains("open");n.classList.toggle("open",l),t.setAttribute("aria-expanded",String(l)),t.setAttribute("aria-label",l?"Collapse":"Expand"),n.setAttribute("aria-expanded",String(l)),r&&(r.style.display=l?"block":"none");return}e.target.closest("a")&&closePanels()},{passive:!0}),$("#results").addEventListener("click",e=>{e.target.closest("a")&&closePanels()},{passive:!0}),addEventListener("hashchange",route,{passive:!0}),addEventListener("keydown",e=>{if("Escape"!==e.key)return;let t=!1,n=$("#kb-help");n&&!n.hidden&&(n.hidden=!0,t=!0);let r=$("#sidebar")?.classList.contains("open"),l=$("#util")?.classList.contains("open");(r||l)&&(closePanels(),t=!0),a&&a.classList.contains("fullscreen")&&(a.classList.remove("fullscreen"),i&&i.setAttribute("aria-pressed","false"),updateMiniViewport(),requestAnimationFrame(()=>highlightCurrent(!0)),t=!0),t&&e.preventDefault()},{capture:!0}),function e(){let t=$("#search"),n=$("#theme-toggle");$("#sidebar"),$("#util");let r=$("#expand");function l(){let e=function e(){let t=$("#kb-help");if(t)return t;t=el("div",{id:"kb-help",role:"dialog","aria-modal":"true","aria-label":"Keyboard shortcuts",hidden:!0});let n=el("div",{class:"panel"}),r=el("h2",{textContent:"Keyboard shortcuts"}),l=el("button",{type:"button",class:"close",title:"Close","aria-label":"Close help",textContent:"✕",onclick:()=>a()}),i=el("header",{},[r,l]),s=el("ul",{},[el("li",{},[el("span",{class:"desc",textContent:"Focus search"}),el("span",{innerHTML:"<kbd>/</kbd> or <kbd>Ctrl</kbd>+<kbd>K</kbd>"})]),el("li",{},[el("span",{class:"desc",textContent:"Cycle theme (light / dark)"}),el("span",{innerHTML:"<kbd>T</kbd>"})]),el("li",{},[el("span",{class:"desc",textContent:"Toggle left sidebar (pages & search)"}),el("span",{innerHTML:"<kbd>B</kbd>"})]),el("li",{},[el("span",{class:"desc",textContent:"Toggle right sidebar (graph & ToC)"}),el("span",{innerHTML:"<kbd>U</kbd>"})]),el("li",{},[el("span",{class:"desc",textContent:"Toggle header (breadcrumbs)"}),el("span",{innerHTML:"<kbd>C</kbd>"})]),el("li",{},[el("span",{class:"desc",textContent:"Fullscreen graph"}),el("span",{innerHTML:"<kbd>G</kbd>"})]),el("li",{},[el("span",{class:"desc",textContent:"Close panels & overlays"}),el("span",{innerHTML:"<kbd>Esc</kbd>"})]),el("li",{},[el("span",{class:"desc",textContent:"Show this help panel"}),el("span",{innerHTML:"<kbd>?</kbd>"})]),]);return n.append(i,s),t.append(n),document.body.appendChild(t),t}();window.openHelp=l,e.hidden=!1,e.focus()}function a(){let e=$("#kb-help");e&&(e.hidden=!0)}function i(e){if(!e)return;let t=e.classList.contains("open");closePanels(),t||(e.classList.add("open"),e.querySelector(".panel-close")||e.append(e("button",{type:"button",class:"panel-close","aria-label":"Close panel",textContent:"✕",onclick:closePanels})))}addEventListener("keydown",e=>{let a=e.key,i=a.toLowerCase(),s=e.target;if("Escape"!==a){var o;if((o=s)&&(o.isContentEditable||/^(INPUT|TEXTAREA|SELECT)$/i.test(o.tagName))){(e.ctrlKey||e.metaKey)&&"k"===i&&(e.preventDefault(),t?.focus());return}if((e.ctrlKey||e.metaKey)&&"k"===i||"/"===a&&!e.shiftKey&&!e.altKey){e.preventDefault(),t?.focus();return}if("t"===i&&!e.ctrlKey&&!e.metaKey&&!e.altKey){e.preventDefault(),n?.click();return}if("b"===i&&!e.ctrlKey&&!e.metaKey&&!e.altKey){e.preventDefault(),(window.__kmToggleSidebar||(()=>{}))();return}if("u"===i&&!e.ctrlKey&&!e.metaKey&&!e.altKey){e.preventDefault(),(window.__kmToggleUtil||(()=>{}))();return}if("g"===i&&!e.ctrlKey&&!e.metaKey&&!e.altKey){e.preventDefault(),r?.click();return}if("c"===i&&!e.ctrlKey&&!e.metaKey&&!e.altKey){e.preventDefault(),(window.__kmToggleCrumb||(()=>{}))();return}if("Escape"===a){let c=$("#kb-help");if(c&&!c.hidden){e.preventDefault(),c.hidden=!0;return}}if("?"===a||e.shiftKey&&"/"===a){e.preventDefault(),l();return}}},{capture:!0}),$("#kb-icon")?.addEventListener("click",e=>{e.preventDefault(),l()}),document.addEventListener("click",e=>{let t=$("#kb-help");t&&!t.hidden&&e.target===t&&a()})}(),function e(){let t=window.matchMedia("(min-width: 1000px), (orientation: landscape)"),n=document.body;function r(){return!t.matches}function l(e,t,r){n.classList.toggle(t,!!e),r&&r.setAttribute("aria-hidden",e?"true":"false")}function a(){n.classList.remove("hide-sidebar","hide-util","hide-crumb"),$("#sidebar")?.setAttribute("aria-hidden","false"),$("#util")?.setAttribute("aria-hidden","false"),$("#crumb")?.setAttribute("aria-hidden","false")}window.__kmToggleSidebar=()=>l(!n.classList.contains("hide-sidebar"),"hide-sidebar",$("#sidebar")),window.__kmToggleUtil=()=>l(!n.classList.contains("hide-util"),"hide-util",$("#util")),window.__kmToggleCrumb=()=>l(!n.classList.contains("hide-crumb"),"hide-crumb",$("#crumb")),t.addEventListener("change",()=>{r()&&a()}),$("#kb-btn")?.addEventListener("click",e=>{e.preventDefault();let t=window.openHelp||(()=>{});t()}),window.__kmIsCondensed=r,window.__kmResetForCondensed=a}(),whenIdle(()=>{KM.ensureHighlight()})}(()=>{let e=new Map,t=[],n=null;function r(e){if(!e||!e.startsWith("#"))return null;let t=e.slice(1).split("#").filter(Boolean);if(!t.length)return null;let n=find(t),r=hashOf(n),l=r?r.split("#"):[];if(!l.length)return null;let a=t.slice(l.length).join("#");return{page:n,anchor:a}}function l(e,t){let n=hashOf(t);e.body.querySelectorAll('a[href^="#"]').forEach(e=>{let t=e.getAttribute("href")||"",l=!!r(t);if(l)return;let a=t.length>1?"#"+t.slice(1):"";e.setAttribute("href","#"+n+a)})}function a(e){try{let t=window.renderMathInElement||KM&&KM.renderMathInElement;if(!t)return;t(e,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\\\[",right:"\\\\]",display:!0},{left:"\\\\(",right:"\\\\)",display:!1},{left:"$",right:"$",display:!1},],throwOnError:!1})}catch{}}function i(e,t){let n=t.getBoundingClientRect(),r=__VPW,l=__VPH,a=Math.min(520,.48*r),i=Math.min(480,.72*l),s=n.right+8+a<=r,o=s?Math.min(n.right+8,r-a-8):Math.max(8,n.left-8-a),c=Math.min(Math.max(8,n.top),l-i-8);Object.assign(e.el.style,{width:a+"px",height:i+"px",left:o+"px",top:c+"px"})}function s(e=0){for(let n=t.length-1;n>=e;n--){let r=t[n];clearTimeout(r.timer),r.el.remove(),t.pop()}}function o(){let e=Array.from(document.querySelectorAll(".km-link-preview")).some(e=>e.matches(":hover"));if(e)return!0;let n=document.activeElement,r=!!(n&&n.closest&&p(n.closest('a[href^="#"]')));if(r)return!0;let l=t.some(e=>e.link&&e.link.matches(":hover"));return l}function c(){clearTimeout(c._t),c._t=setTimeout(()=>{o()||s(0)},220)}async function d(t,n,r){let i=e.get(n.id);if(!i){let{parse:s}=await KM.ensureMarkdown(),o=el("div");o.innerHTML=s(n.content,{headerIds:!1}),numberHeadings(o),i=o.innerHTML,e.set(n.id,i)}if(t.body.innerHTML=i,l(t,n),await KM.ensureHighlight(),await KM.ensureHLJSTheme(),t.body.querySelectorAll("pre code").forEach(e=>window.hljs.highlightElement(e)),await KM.ensureKatex(),a(t.body),decorateCodeBlocks(t.body),decorateHeadings(n,t.body),r){let c=t.el;await new Promise(e=>requestAnimationFrame(()=>requestAnimationFrame(e)));let d=t.body.querySelector("#"+CSS.escape(r));if(d){let h=c.querySelector("header"),u=h?h.offsetHeight:0,p=c.getBoundingClientRect(),f=d.getBoundingClientRect(),g=f.top-p.top+c.scrollTop;c.scrollTo({top:Math.max(0,g-u-6),behavior:"instant"}),d.classList.add("km-preview-focus")}}}function h(e){let n=el("div",{class:"km-link-preview",role:"dialog","aria-label":"Preview"}),r=el("header",{},[el("button",{type:"button",class:"km-preview-close",title:"Close","aria-label":"Close",innerHTML:"✕"})]),l=el("div");n.append(r,l),document.body.appendChild(n);let a={el:n,body:l,link:e,hover:!1,timer:null},o=t.push(a)-1;return n.addEventListener("mouseenter",()=>{a.hover=!0,clearTimeout(a.timer),clearTimeout(c._t)},{passive:!0}),n.addEventListener("mouseleave",e=>{a.hover=!1;let t=e.relatedTarget;t&&t.closest&&t.closest(".km-link-preview")||(a.timer=setTimeout(()=>{s(o)},240))},{passive:!0}),r.querySelector("button").addEventListener("click",()=>s(o)),n.addEventListener("mouseover",e=>f(e),!0),n.addEventListener("focusin",e=>f(e),!0),i(a,e),a}async function u(e){let n=e.getAttribute("href")||"",l=r(n);if(!l)return;let a=t.findIndex(t=>t.link===e);if(a>=0){let s=t[a];clearTimeout(s.timer),i(s,e);return}let o=h(e);t.forEach(e=>clearTimeout(e.timer)),o.targetKey=`${l.page.id}#${l.anchor||""}`,await d(o,l.page,l.anchor)}function p(e){let t=e?.getAttribute("href")||"";return!!r(t)}function f(e){let t=e.target&&e.target.closest&&e.target.closest('a[href^="#"]');if(!t||!p(t))return;clearTimeout(n);let r="focusin"===e.type;r?u(t):n=setTimeout(()=>u(t),220)}function g(){let e=$("#content");e&&(e.addEventListener("mouseover",f,!0),e.addEventListener("focusin",f,!0),e.addEventListener("mouseout",e=>{let t=e.relatedTarget;t&&t.closest&&t.closest(".km-link-preview")||c()},!0),addEventListener("hashchange",()=>s(0),{passive:!0}),addEventListener("scroll",()=>c(),{passive:!0}))}KM.attachLinkPreviewsV2=g})(),(async()=>{try{if(!t)throw Error("CONFIG.MD is empty.");let e,n=new AbortController,r=setTimeout(()=>n.abort("fetch-timeout"),2e4),l=CACHE_MIN>0?readCache(t):null,a=l&&Date.now()-l.ts<=6e4*CACHE_MIN;try{if(a)e=l.txt;else{let i=await fetch(t,{cache:"no-cache",signal:n.signal});if(clearTimeout(r),!i.ok)throw Error(`Failed to fetch MD (${i.status})`);e=await i.text(),CACHE_MIN>0&&writeCache(t,e)}}catch(s){if(clearTimeout(r),l?.txt)console.warn("Network failed; using stale cached Markdown"),e=l.txt;else throw s}parseMarkdownBundle(e),attachSecondaryHomes(),computeHashes(),await domReady(),initUI(),await new Promise(e=>setTimeout(e,120)),highlightCurrent(!0)}catch(o){console.warn("Markdown load failed:",o);let c=$("#content");c&&(c.innerHTML=`<h1>Content failed to load</h1><p>Could not fetch or parse the Markdown bundle. Check <code>window.CONFIG.MD</code> and network access.</p><pre>${String(o?.message||o)}</pre>`)}})();
